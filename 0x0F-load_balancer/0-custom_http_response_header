#!/usr/bin/env bash
# Configures Nginx to serve a custom HTTP header X-Served-By with the hostname

# Install nginx
apt-get update -y
apt-get install -y nginx

# Set Hello World page
echo "Hello World!" > /var/www/html/index.html

# Add custom header in Nginx main config to be inherited by all responses
# This will include the hostname in X-Served-By
sed -i "/http {/a \    add_header X-Served-By \$hostname;" /etc/nginx/nginx.conf

# Restart nginx to apply changes
service nginx restart
