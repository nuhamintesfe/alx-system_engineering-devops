#!/usr/bin/env bash
# Configures Nginx with a custom header X-Served-By that returns the server's hostname

apt-get -y update
apt-get -y install nginx

# Update default index page
echo "Hello World!" > /var/www/html/index.nginx-debian.html

# Add custom header to Nginx config
if ! grep -q "add_header X-Served-By" /etc/nginx/nginx.conf; then
    sed -i "/http {/a \\    add_header X-Served-By \$hostname;" /etc/nginx/nginx.conf
fi

# Restart Nginx to apply changes
service nginx restart

